<div class="" style="text-align:center;">
    <iframe src="https://mf-map.netlify.com/map?iframe=true&subdomain=aberdeen" frameborder="0" width="100%" height="100%" id="iFrame1" sandbox="allow-top-navigation allow-scripts allow-same-origin"></iframe>
    <h3 id="IE_map_text">Functionality works best while viewing with Google Chrome or Firefox</h3>
    <img id="IE_map" src="">
</div>

<script>
    $(document).ready(function(e){
        init(e);
        function renderPageData(){
            console.log('IE ' + detectIE());
            if(detectIE()){
                var svg_url = '//mallmaverick.com'+getPropertyDetails().svgmap_url;
                $('#iFrame1').remove();
                $("#IE_map").attr("src", svg_url)
                $('#IE_map_text').show();
            } 
            else {
                $('#IE_map').remove();
                $('#IE_map_text').remove();
            }
            show_content();
        }
        loadMallDataCached(renderPageData);
        
    });
    window.addEventListener('message', function(event) {
        // IMPORTANT: check the origin of the data! 
        if (event.origin.startsWith('https://mf-map.netlify.com')) { 
            // The data was sent from your site.
            // Data sent with postMessage is stored in event.data:
            if(event.data && event.data.selectedStore) {
                var store = event.data.selectedStore
                window.location.href= "/stores/"+store.slug
            }
        }
    }); 
    
    function detectIE() {
        var ua = window.navigator.userAgent;
    
        var msie = ua.indexOf('MSIE ');
        if (msie > 0) {
            // IE 10 or older => return version number
            return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
        }
    
        var trident = ua.indexOf('Trident/');
        if (trident > 0) {
            // IE 11 => return version number
            var rv = ua.indexOf('rv:');
            return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);
        }
    
        var edge = ua.indexOf('Edge/');
        if (edge > 0) {
           // Edge (IE 12+) => return version number
           return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);
        }
    
        // other browser
        return false;
    }
</script>
<style>
    html, iframe, #IE_map{
        scroll-behavior: smooth;
        height: calc(100vh - 101px) !important;
        top: 101px !important;
    }
    #IE_map{
        margin:auto;
    }
    @media (max-width: 768px) {
        html, iframe, #IE_map{
            height: calc(100vh - 80px) !important;
        }
        .home_hours_phone {
            display:none!important;
        }
    }
</style>